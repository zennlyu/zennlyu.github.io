<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://fastly.jsdelivr.net'>
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>踩坑合集/(不定时补充) - zennlyu</title>

  
    <meta name="description" content="前后端踩坑合集前端Node-sass: Command failed 更改 yarn 源即可 123yarn config set registry https:&#x2F;&#x2F;registry.npm.taobao.org -gyarn config set sass_binary_site http:&#x2F;&#x2F;cdn.npm.taobao.org&#x2F;dist&#x2F;node-sass -gyarn add node-s">
<meta property="og:type" content="article">
<meta property="og:title" content="踩坑合集&#x2F;(不定时补充)">
<meta property="og:url" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/index.html">
<meta property="og:site_name" content="zennlyu">
<meta property="og:description" content="前后端踩坑合集前端Node-sass: Command failed 更改 yarn 源即可 123yarn config set registry https:&#x2F;&#x2F;registry.npm.taobao.org -gyarn config set sass_binary_site http:&#x2F;&#x2F;cdn.npm.taobao.org&#x2F;dist&#x2F;node-sass -gyarn add node-s">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/node-sass.png">
<meta property="og:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/sentry1.png">
<meta property="og:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/sentry2.png">
<meta property="og:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/html-position.png">
<meta property="og:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/axios-cross-origin.png">
<meta property="article:published_time" content="2024-07-15T03:58:25.980Z">
<meta property="article:modified_time" content="2024-09-16T12:13:56.829Z">
<meta property="article:author" content="zennlyu">
<meta property="article:tag" content="sde">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/node-sass.png">
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    


<header class="header">

<div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://i.imgtg.com/2022/07/09/eTtVL.jpg" onerror="javascript:this.classList.add('error');this.src='https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main">zennlyu</div></a></div>
<nav class="menu dis-select"><a class="nav-item active" href="/">Blog</a><a class="nav-item" href="/more/">更多</a></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">TOC</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-text">前端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-sass-Command-failed"><span class="toc-text">Node-sass: Command failed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sentry-cli-%E5%AE%89%E8%A3%85%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">@sentry&#x2F;cli 安装错误的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node16-%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%8A%A0%E5%AF%86%E9%83%A8%E4%BB%B6%E9%97%AE%E9%A2%98"><span class="toc-text">node16 以上的加密部件问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%A1%88-1"><span class="toc-text">方案 1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%A1%88-2"><span class="toc-text">方案 2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-nvm"><span class="toc-text">安装 nvm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flutter-RN-iOS-%E8%81%94%E8%B0%83%E8%AE%B0%E5%BD%95"><span class="toc-text">Flutter&#x2F;RN iOS 联调记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Firebase-Analytics-setScreenName-deprecatedFirebase-Analytics-setScreenName-%E5%B7%B2%E5%BC%83%E7%94%A8"><span class="toc-text">Firebase Analytics setScreenName deprecatedFirebase Analytics setScreenName 已弃用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xcode-12-%E8%A7%A3%E6%B1%BA-Command-PhaseScriptExecution-failed-with-a-nonzero-exit-code"><span class="toc-text">Xcode 12 解決 Command PhaseScriptExecution failed with a nonzero exit code</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8-build-%E5%B0%88%E6%A1%88%E6%99%82%E9%81%87%E5%88%B0%E4%BB%A5%E4%B8%8B%E9%8C%AF%E8%AA%A4%E6%99%82"><span class="toc-text">在 build 專案時遇到以下錯誤時</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%B1%BA-Swift-failed-to-emit-precompiled-header"><span class="toc-text">解決 Swift failed to emit precompiled header</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-%E6%97%A5%E6%9C%9F%E8%A1%A8%E5%8D%95%E9%99%90%E5%88%B6%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E4%B8%BA%E6%9C%80%E5%A4%A7%E5%8F%AF%E9%80%89%E5%80%BC"><span class="toc-text">Vue 日期表单限制当前时间为最大可选值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-input-%E6%97%A0%E6%B3%95%E7%94%A8-maxlength-%E9%99%90%E5%88%B6%E9%95%BF%E5%BA%A6"><span class="toc-text">Vue input 无法用 maxlength 限制长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91"><span class="toc-text">vue 地图开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E4%BD%8D%E7%BD%AE"><span class="toc-text">获取本地位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%8E%E5%B8%82%E5%8C%BA%E5%9F%9F%E5%90%8D%E7%A7%B0%E8%BD%AC%E5%8C%96"><span class="toc-text">城市区域名称转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BE-API-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6"><span class="toc-text">使用腾讯地图 API 获取当前位置的经纬度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF"><span class="toc-text">后端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Non-resolvable-import-POM"><span class="toc-text">Non-resolvable import POM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jar-missing-problem"><span class="toc-text">jar missing problem</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#package-org-springframework-cloud-openfeign-does-not-exist"><span class="toc-text">package org.springframework.cloud.openfeign does not exist</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E8%B8%A9%E5%9D%91%E5%A4%A7%E5%85%A8"><span class="toc-text">开发环境配置踩坑大全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-maven"><span class="toc-text">配置 maven</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-flutter"><span class="toc-text">配置 flutter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-m1-GPU-%E8%AE%AD%E7%BB%83-Tensorflow"><span class="toc-text">使用 m1 GPU 训练 Tensorflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-TensorFlow-%E6%8A%A5%E9%94%99"><span class="toc-text">运行 TensorFlow 报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tensorflow-%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86%E5%BC%82%E5%B8%B8"><span class="toc-text">tensorflow 加载数据集异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#M1-%E5%AE%89%E8%A3%85-pytorch"><span class="toc-text">M1 安装 pytorch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#m1-%E5%AE%89%E8%A3%85-qemu-%E5%8D%A1%E6%AD%BB%E9%97%AE%E9%A2%98"><span class="toc-text">m1 安装 qemu 卡死问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Catalina-quarantine-for-corrupted-apps"><span class="toc-text">Catalina quarantine for corrupted apps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homebrew%E5%9B%BD%E5%86%85%E6%BA%90"><span class="toc-text">Homebrew国内源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-DS-Store"><span class="toc-text">删除 .DS_Store</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-%E9%95%9C%E5%83%8F"><span class="toc-text">Python 镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dev-Util"><span class="toc-text">Dev-Util</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Google-Maps-API"><span class="toc-text">Google Maps API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">数据可视化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tornado-%E8%AF%95%E7%94%A8%E6%80%9D%E8%80%83"><span class="toc-text">Tornado 试用思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Duplicate-Refresh-of-FetchRequest-in-the-Sheet-Detents-Change"><span class="toc-text">Duplicate Refresh of FetchRequest in the Sheet Detents Change</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM-Reflection"><span class="toc-text">JVM Reflection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Binding-get-%E5%92%8C-set-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E4%BB%BB%E6%84%8F%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-text">Binding get 和 set 实现对任意数据源的双向绑定</span></a></li></ol></div></div></div>


</div>


    </aside>
    <div class='l_main'>
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/sde/">sde</a></div><div id="post-meta">Posted on&nbsp;<time datetime="2024-07-15T03:58:25.980Z">2024-07-15</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>踩坑合集/(不定时补充)</span></h1>
<h1 id="前后端踩坑合集"><a href="#前后端踩坑合集" class="headerlink" title="前后端踩坑合集"></a>前后端踩坑合集</h1><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><h3 id="Node-sass-Command-failed"><a href="#Node-sass-Command-failed" class="headerlink" title="Node-sass: Command failed"></a>Node-sass: Command failed</h3><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/node-sass.png" alt="node-sass"></p>
<p>更改 <code>yarn</code> 源即可</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npm.taobao.org -g</span><br><span class="line">yarn config <span class="built_in">set</span> sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g</span><br><span class="line">yarn add node-sass</span><br></pre></td></tr></table></figure>
<p>另附 npm 换源</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line">npm config <span class="built_in">set</span> disturl https://npm.taobao.org/dist</span><br></pre></td></tr></table></figure>
<h3 id="sentry-cli-安装错误的问题"><a href="#sentry-cli-安装错误的问题" class="headerlink" title="@sentry/cli 安装错误的问题"></a>@sentry/cli 安装错误的问题</h3><p>In case of @sentry-cli problem, create <code>.yarnrc</code> and write the source below into it.</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/sentry1.png" alt="sentry1"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registry: https://registry.npm.taobao.org</span><br><span class="line">ENTRYCLI_CDNURL: https://cdn.npm.taobao.org/dist/sentry-cli</span><br><span class="line">sentrycli_cdnurl: https://cdn.npm.taobao.org/dist/sentry-cli</span><br></pre></td></tr></table></figure>
<p>Then u will see the source is edited and show as below</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/sentry2.png" alt="sentry2"></p>
<h3 id="node16-以上的加密部件问题"><a href="#node16-以上的加密部件问题" class="headerlink" title="node16 以上的加密部件问题"></a>node16 以上的加密部件问题</h3><p>使用 node18 跑新项目时出现了这一错误</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error/0308010C/digital envelope routines//unsupported</span><br></pre></td></tr></table></figure>
<p>看错误报告里讲<code>node17.0</code>以上的版本会出现这个情况。<br><a target="_blank" rel="noopener" href="https://github.com/webpack/webpack/issues/14532">nodejs 17: digital envelope routines::unsupported #14532</a></p>
<h4 id="方案-1"><a href="#方案-1" class="headerlink" title="方案 1"></a>方案 1</h4><p>环境变量里面加个变量，将<code>OpenSSL</code>降回到老策略去：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export NODE_OPTIONS=--openssl-legacy-provider</span><br></pre></td></tr></table></figure>
<h4 id="方案-2"><a href="#方案-2" class="headerlink" title="方案 2"></a>方案 2</h4><p>版本回退到<code>Node.js 16</code>。<br>如果平时工作的项目所使用的<code>node</code>版本不一样，通过全局频繁卸载安装的方式显然效率低下。推荐使用<code>nvm</code>来安装管理<code>node</code>版本，并且<code>node</code>版本间的切换也非常方便。<br><code>nvm</code>切换<code>node</code>版本步骤：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 安装 node 16.13.0 版本</span><br><span class="line">nvm install 16.13.0</span><br><span class="line"># 设置默认使用 node 版本</span><br><span class="line">nvm alias default v16.13.0</span><br><span class="line"># 确认切换是否成功</span><br><span class="line">node -v</span><br><span class="line">v16.13.0</span><br></pre></td></tr></table></figure>
<h3 id="安装-nvm"><a href="#安装-nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h3><p>运行 curl 命令时会出现以下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl: (7) Failed to connect to raw.githubusercontent.com port 443 after 14 ms: Connection refused</span><br></pre></td></tr></table></figure>
<p>github 的一些域名的 DNS 解析被污染，导致DNS 解析过程无法通过域名取得正确的IP地址。</p>
<p>因此我们要找到正确的这个raw.githubusercontent.com网站正确的ip地址</p>
<ul>
<li><p>打开ip地址查询网站：<a target="_blank" rel="noopener" href="https://www.ipaddress.com/">https://www.ipaddress.com/</a></p>
</li>
<li><p>输入需要查询的网站名称raw.githubusercontent.com</p>
</li>
<li><p>网站上会显示该网站的存在的ipv4以及ipv6地址，这里可以选取一个ipv4地址来进行设置</p>
</li>
</ul>
<p>打开系统host文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure>
<p>在host文件中添加一行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">185.199.108.133 raw.githubusercontent.com</span><br></pre></td></tr></table></figure>
<p>最后执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="Flutter-RN-iOS-联调记录"><a href="#Flutter-RN-iOS-联调记录" class="headerlink" title="Flutter/RN iOS 联调记录"></a>Flutter/RN iOS 联调记录</h3><h4 id="Firebase-Analytics-setScreenName-deprecatedFirebase-Analytics-setScreenName-已弃用"><a href="#Firebase-Analytics-setScreenName-deprecatedFirebase-Analytics-setScreenName-已弃用" class="headerlink" title="Firebase Analytics setScreenName deprecatedFirebase Analytics setScreenName 已弃用"></a>Firebase Analytics setScreenName deprecatedFirebase Analytics setScreenName 已弃用</h4><p>ARC Semantic Issue (Xcode): No known class method for selector ‘setScreenName:screenClass:’</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/68663243/error-no-known-class-method-for-selector-setscreennamescreenclass">https://stackoverflow.com/questions/68663243/error-no-known-class-method-for-selector-setscreennamescreenclass</a></p>
<p>如果 react-native 中发生相同的错误，则 在 <code>RNFirebaseAnalytics.m</code> 文件中，更新以下代码行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[FIRAnalytics setScreenName:screenName screenClass:screenClassOverriewl;</span><br></pre></td></tr></table></figure>
<p>至</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[FIRAnalytics logEventWithName: kFIREventScreenView parameters: @(kFIRParameterScreenName: screenName])</span><br></pre></td></tr></table></figure>
<h4 id="Xcode-12-解決-Command-PhaseScriptExecution-failed-with-a-nonzero-exit-code"><a href="#Xcode-12-解決-Command-PhaseScriptExecution-failed-with-a-nonzero-exit-code" class="headerlink" title="Xcode 12 解決 Command PhaseScriptExecution failed with a nonzero exit code"></a>Xcode 12 解決 Command PhaseScriptExecution failed with a nonzero exit code</h4><h5 id="在-build-專案時遇到以下錯誤時"><a href="#在-build-專案時遇到以下錯誤時" class="headerlink" title="在 build 專案時遇到以下錯誤時"></a>在 build 專案時遇到以下錯誤時</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/.../Script-E97175B023F12D90003B2A7E.sh: line 2: /usr/local/bin/carthage: No such file or directoryCommand PhaseScriptExecution failed with a nonzero exit code</span><br></pre></td></tr></table></figure>
<p>到 Project setting targets &gt; Build Phases &gt; Run Script&gt;</p>
<p>勾選 ☑For install builds only</p>
<h4 id="解決-Swift-failed-to-emit-precompiled-header"><a href="#解決-Swift-failed-to-emit-precompiled-header" class="headerlink" title="解決 Swift failed to emit precompiled header"></a>解決 Swift failed to emit precompiled header</h4><p>Q: 在 OC 中引用 Swift , 需要#import “ProductName-Swift.h”, 升級之後回報failed to emit precompiled header的錯誤.</p>
<p>A: 在Build Settings 中, 搜索 precomplile找到Precompile Prefix Header設為YES</p>
<h2 id="Vue-日期表单限制当前时间为最大可选值"><a href="#Vue-日期表单限制当前时间为最大可选值" class="headerlink" title="Vue 日期表单限制当前时间为最大可选值"></a>Vue 日期表单限制当前时间为最大可选值</h2><p>接手了 Vue 项目，需要 Mint-UI 的日期表单的最大可选值设置为当前时间，也就是说只能选择现在和现在以前的时间。</p>
<p>官方文档看起来使用方法很简单，添加一个endDate属性，设置最大可选时间就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;mt-datetime-picker v-model=&quot;datetime&quot; ref=&quot;datetimePicker&quot; type=&quot;datetime&quot; @confirm=&quot;this.changeTime&quot; endDate=&quot;new Date()&quot;&gt;</span><br><span class="line">&lt;/mt-datetime-picker&gt;</span><br></pre></td></tr></table></figure>
<p>当然这个方法报错 <code>endDate.getFullYear() is not a function</code>，endDate不是当做一个属性被编译，而是被当作一个变量被编译了，所以说明这个用法是错误的。</p>
<p>正确用法如下，需要在date里面给endDate赋值，比如我这里只能选择今天及之前的日期：<code>endDate: new Date()</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;mt-datetime-picker v-model=&quot;datetime&quot; ref=&quot;datetimePicker&quot; type=&quot;datetime&quot; @confirm=&quot;this.changeTime&quot; :end-date=&quot;endDate&quot;&gt;</span><br><span class="line">&lt;/mt-datetime-picker&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Vue-input-无法用-maxlength-限制长度"><a href="#Vue-input-无法用-maxlength-限制长度" class="headerlink" title="Vue input 无法用 maxlength 限制长度"></a>Vue input 无法用 maxlength 限制长度</h2><p>1、当input，type为text时，设置maxlength后，能限制输入内容长度；</p>
<p>2、当input，type为tel时，设置maxlength后，也是能限制输入内容长度，并且弹起键盘为默认为数字键盘；</p>
<p>3、当input，type为number，设置了maxlength，是无法正常限制输入内容长度的，input元素内还是可以无限的输入内容。</p>
<p>解决方法：a 通过监听input的输入，input事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;number&quot; oninput=&quot;if( this.value.length &gt; 4 )  this.value = this.value.slice(0,4)&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>当输入超过4位后，会进行截断，保留前面的4位。<br>用vue，使用@input<br>但是会有小小不好的体验，输入第五位的时候，会先显示第五位，然后再删除第五位。因为这是通过监听input事件，来实现的。</p>
<p>解决方法：b 将number改为tel类型，然后设置maxlength。因为设置type为tel后，也是只能输入数字。然后只能输入相应的位数。</p>
<h2 id="vue-地图开发"><a href="#vue-地图开发" class="headerlink" title="vue 地图开发"></a>vue 地图开发</h2><h3 id="获取本地位置"><a href="#获取本地位置" class="headerlink" title="获取本地位置"></a>获取本地位置</h3><p>html5 地理定位接口在许多浏览器平台都返回如下的错误信息，这是因为 html5 默认调用谷歌接口，会有安全限制。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/html-position.png" alt="html-position"></p>
<h3 id="城市区域名称转化"><a href="#城市区域名称转化" class="headerlink" title="城市区域名称转化"></a>城市区域名称转化</h3><p>获取到的是经纬度，所以要调百度或者谷歌的地图api，来转换为城市。</p>
<h3 id="使用腾讯地图-API-获取当前位置的经纬度"><a href="#使用腾讯地图-API-获取当前位置的经纬度" class="headerlink" title="使用腾讯地图 API 获取当前位置的经纬度"></a>使用腾讯地图 API 获取当前位置的经纬度</h3><p>因为使用 axios 自动拼接 url 路径会产生跨域问题<img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/-%20%E8%B8%A9%E5%9D%91%E5%90%88%E9%9B%86/axios-cross-origin.png" alt="axios-cross-origin"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--	在 main.js 中添加</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">axios.defaults.baseURL=&#x27;#&#x27;</span><br><span class="line">Vue.prototype.$http = axios </span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">    name: &#x27;Home&#x27;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      HelloWorld</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123; </span><br><span class="line">      this.getlocation()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    // 使用了async，await去简化Promise并解构获取到的数据，其中 axios 中的 https://apis.map.qq.com/ws/location/v1/ip 是在腾讯地图控制台获取的 reference</span><br><span class="line">      async getlocation() &#123;</span><br><span class="line">        const &#123;</span><br><span class="line">          data: res</span><br><span class="line">        &#125; = await this.$http.get(&#x27;https://apis.map.qq.com/ws/location/v1/ip&#x27;, &#123;</span><br><span class="line">          params: &#123;</span><br><span class="line">            key: &#x27;XOXBZ-MZWWD-CDX4H-PONXN-UA5PJ-D7FJN&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(res);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用 vue-jsonp 解决跨域问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--	在 main.js 中添加</span><br><span class="line">import &#123; VueJsonp &#125; from &#x27;vue-jsonp&#x27;</span><br><span class="line">Vue.use(VueJsonp）</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;Home&#x27;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      //获取当前位置的经纬度</span><br><span class="line">      var data = &#123;</span><br><span class="line">        key: &quot;XOXBZ-MZWWD-CDX4H-PONXN-*****-*****&quot; //腾讯地图密钥</span><br><span class="line">      &#125;;</span><br><span class="line">      var url = &quot;https://apis.map.qq.com/ws/location/v1/ip&quot;; //地理位置信息的接口</span><br><span class="line">      data.output = &quot;jsonp&quot;;</span><br><span class="line">      this.$jsonp(url, data)</span><br><span class="line">        .then(res =&gt; &#123;</span><br><span class="line">          console.log(res,123);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(error =&gt; &#123;</span><br><span class="line">          console.log(error,456);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><h3 id="Non-resolvable-import-POM"><a href="#Non-resolvable-import-POM" class="headerlink" title="Non-resolvable import POM"></a><code>Non-resolvable import POM</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mac@macdeMacBook-Pro WX-Fleas-Market-Demo % mvn clean package -Dmaven.test.skip=true</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[ERROR] [ERROR] Some problems were encountered while processing the POMs:</span><br><span class="line">[ERROR] Non-resolvable import POM: org.springframework.cloud:spring-cloud-dependencies:pom:Greenwich.M1 was not found in https://maven.aliyun.com/repository/public during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of aliyunmaven has elapsed or updates are forced @ line 44, column 25</span><br><span class="line"> @ </span><br><span class="line">[ERROR] The build could not read 1 project -&gt; [Help 1]</span><br><span class="line">[ERROR]   </span><br><span class="line">[ERROR]   The project io.github.nnkwrik:fangxianyu:0.0.1-SNAPSHOT (/Users/mac/github/WX-Fleas-Market-Demo/pom.xml) has 1 error</span><br><span class="line">[ERROR]     Non-resolvable import POM: org.springframework.cloud:spring-cloud-dependencies:pom:Greenwich.M1 was not found in https://maven.aliyun.com/repository/public during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of aliyunmaven has elapsed or updates are forced @ line 44, column 25 -&gt; [Help 2]</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException</span><br><span class="line">[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException</span><br></pre></td></tr></table></figure>
<p>转到发现</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>参考了这篇<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44259720/article/details/104531575">博客</a>后，知道系统文件自动将 <code>$&#123;spring-cloud.version&#125;</code> 读为 <code>Greenwich.M1</code> 版本。将其改成 <code>Edgware.SR3</code> 即可跑通。</p>
<p>开发代号看似没有什么规律，但实际上首字母是有顺序的，比如：Dalston版本，我们可以简称 D 版本，对应的 Edgware 版本我们可以简称 E 版本。</p>
<p>D、E版本：二者均基于SpringBoot的1.5.x版本，但支持其他组件的版本不同，如以 Dalston.SR4 和 Edgware.RELEASE 来对比：</p>
<ul>
<li>spring-cloud-config 分别对应 1.3.3和 1.4.0；</li>
<li>spring-cloud-netflix 分别对应 1.3.5和 1.4.0；</li>
<li>spring-cloud-consul 分别对应 1.2.1和 1.3.0；</li>
<li>spring-cloud-gateway 前者不支持，后者 1.0.0。</li>
</ul>
<p>F版本：F版本是个绝对的大版本，几乎所有组件，全部同步变更版本号为2.x；</p>
<p>SNAPSHOT： 小版本，快照版本，随时可能修改；</p>
<p>M： MileStone，小版本，M1表示第1个里程碑版本，一般同时标注PRE，表示预览版版。</p>
<p>SR： Service Release，小版本，SR1表示第1个正式版本，一般同时标注GA：(GenerallyAvailable),表示稳定版本。</p>
<h3 id="jar-missing-problem"><a href="#jar-missing-problem" class="headerlink" title="jar missing problem"></a><code>jar missing problem</code></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] [ERROR] Some problems were encountered <span class="keyword">while</span> processing the POMs:</span><br><span class="line">[ERROR] <span class="string">&#x27;dependencies.dependency.version&#x27;</span> <span class="keyword">for</span> org.springframework.cloud:spring-cloud-starter-gateway:jar is missing. @ line 29, column 21</span><br><span class="line"> @ </span><br><span class="line">[ERROR] The build could not <span class="built_in">read</span> 1 project -&gt; [Help 1]</span><br><span class="line">[ERROR]   </span><br><span class="line">[ERROR]   The project io.github.nnkwrik:gateway:0.0.1-SNAPSHOT (/Users/mac/github/WX-Fleas-Market-Demo/gateway/pom.xml) has 1 error</span><br><span class="line">[ERROR]     <span class="string">&#x27;dependencies.dependency.version&#x27;</span> <span class="keyword">for</span> org.springframework.cloud:spring-cloud-starter-gateway:jar is missing. @ line 29, column 21</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to <span class="built_in">enable</span> full debug logging.</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please <span class="built_in">read</span> the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException</span><br></pre></td></tr></table></figure>
<p>子在pom中为他们指定版本号就好了。版本号可以在<a target="_blank" rel="noopener" href="https://mvnrepository.com/">https://mvnrepository.com/</a> 中通过artifactId 查询</p>
<p>还有写项目的时候突然报了这个错误：<code>Error:java:java.lang.ExceptionInInitializerError: com.sun.tools.javac.code.TypeTags</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">WARNING: All illegal access operations will be denied <span class="keyword">in</span> a future release</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary <span class="keyword">for</span> fangxianyu 0.0.1-SNAPSHOT:</span><br><span class="line">[INFO] </span><br><span class="line">[INFO] fangxianyu ......................................... SUCCESS [  5.236 s]</span><br><span class="line">[INFO] common ............................................. FAILURE [ 55.328 s]</span><br><span class="line">[INFO] inner-api .......................................... SKIPPED</span><br><span class="line">[INFO] eureka ............................................. SKIPPED</span><br><span class="line">[INFO] gateway ............................................ SKIPPED</span><br><span class="line">[INFO] auth-service ....................................... SKIPPED</span><br><span class="line">[INFO] user-service ....................................... SKIPPED</span><br><span class="line">[INFO] goods-service ...................................... SKIPPED</span><br><span class="line">[INFO] im-service ......................................... SKIPPED</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  01:00 min</span><br><span class="line">[INFO] Finished at: 2022-07-13T23:39:33+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile) on project common: Fatal error compiling: java.lang.ExceptionInInitializerError: com.sun.tools.javac.code.TypeTags -&gt; [Help 1]</span><br></pre></td></tr></table></figure>
<p>然后当时就很懵逼，后来通过排错，发现是使用的lombok版本过低，我使用的springboot的版本是:: Spring Boot :: (v2.2.1.RELEASE)</p>
<h3 id="package-org-springframework-cloud-openfeign-does-not-exist"><a href="#package-org-springframework-cloud-openfeign-does-not-exist" class="headerlink" title="package org.springframework.cloud.openfeign does not exist"></a><code>package org.springframework.cloud.openfeign does not exist</code></h3><ol>
<li><p>没有添加版本号</p>
</li>
<li><p>没有添加以下依赖</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="开发环境配置踩坑大全"><a href="#开发环境配置踩坑大全" class="headerlink" title="开发环境配置踩坑大全"></a>开发环境配置踩坑大全</h2><h3 id="配置-maven"><a href="#配置-maven" class="headerlink" title="配置 maven"></a>配置 maven</h3><p>解压到某路径如 <code>/usr/local/...</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile </span><br><span class="line"></span><br><span class="line">export M2_HOME=/usr/local/apache-maven-3.8.4 </span><br><span class="line">export PATH=$PATH:$M2_HOME/bin</span><br></pre></td></tr></table></figure>
<h3 id="配置-flutter"><a href="#配置-flutter" class="headerlink" title="配置 flutter"></a>配置 flutter</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:`pwd`/flutter/bin&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-m1-GPU-训练-Tensorflow"><a href="#使用-m1-GPU-训练-Tensorflow" class="headerlink" title="使用 m1 GPU 训练 Tensorflow"></a>使用 m1 GPU 训练 Tensorflow</h3><p>Please try the same after creating a virtual environment.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv ~/tensorflow-metal</span><br><span class="line">source ~/tensorflow-metal/bin/activate</span><br><span class="line">python -m pip install -U pip</span><br><span class="line">python -m pip install tensorflow-macos</span><br><span class="line">python -m pip install tensorflow-metal</span><br></pre></td></tr></table></figure>
<p>使用 <code>bench.py</code> 测试 m1 性能，运行时间为 108.47s（作为对比，24 核 gpu m1max 运行时间为 58s)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> tensorflow_datasets <span class="keyword">as</span> tfds</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;TensorFlow version:&quot;</span>, tf.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Num GPUs Available: &quot;</span>, <span class="built_in">len</span>(tf.config.experimental.list_physical_devices(<span class="string">&#x27;GPU&#x27;</span>)))</span><br><span class="line">start_time = time.time()</span><br><span class="line"><span class="comment"># tf.config.list_physical_devices(&#x27;GPU&#x27;)</span></span><br><span class="line"></span><br><span class="line">(ds_train, ds_test), ds_info = tfds.load(</span><br><span class="line">    <span class="string">&#x27;mnist&#x27;</span>,</span><br><span class="line">    split=[<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;test&#x27;</span>],</span><br><span class="line">    shuffle_files=<span class="literal">True</span>,</span><br><span class="line">    as_supervised=<span class="literal">True</span>,</span><br><span class="line">    with_info=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normalize_img</span>(<span class="params">image, label</span>):</span><br><span class="line">  <span class="string">&quot;&quot;&quot;Normalizes images: `uint8` -&gt; `float32`.&quot;&quot;&quot;</span></span><br><span class="line">  <span class="keyword">return</span> tf.cast(image, tf.float32) / <span class="number">255.</span>, label</span><br><span class="line"></span><br><span class="line">batch_size = <span class="number">128</span></span><br><span class="line">ds_train = ds_train.<span class="built_in">map</span>(</span><br><span class="line">    normalize_img, num_parallel_calls=tf.data.experimental.AUTOTUNE)</span><br><span class="line">ds_train = ds_train.cache()</span><br><span class="line">ds_train = ds_train.shuffle(ds_info.splits[<span class="string">&#x27;train&#x27;</span>].num_examples)</span><br><span class="line">ds_train = ds_train.batch(batch_size)</span><br><span class="line">ds_train = ds_train.prefetch(tf.data.experimental.AUTOTUNE)</span><br><span class="line">ds_test = ds_test.<span class="built_in">map</span>(</span><br><span class="line">    normalize_img, num_parallel_calls=tf.data.experimental.AUTOTUNE)</span><br><span class="line">ds_test = ds_test.batch(batch_size)</span><br><span class="line">ds_test = ds_test.cache()</span><br><span class="line">ds_test = ds_test.prefetch(tf.data.experimental.AUTOTUNE)</span><br><span class="line"></span><br><span class="line">model = tf.keras.models.Sequential([</span><br><span class="line">  tf.keras.layers.Conv2D(<span class="number">32</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>),</span><br><span class="line">                 activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">  tf.keras.layers.Conv2D(<span class="number">64</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>),</span><br><span class="line">                 activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">  tf.keras.layers.MaxPooling2D(pool_size=(<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line"><span class="comment">#   tf.keras.layers.Dropout(0.25),</span></span><br><span class="line">  tf.keras.layers.Flatten(),</span><br><span class="line">  tf.keras.layers.Dense(<span class="number">128</span>, activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line"><span class="comment">#   tf.keras.layers.Dropout(0.5),</span></span><br><span class="line">  tf.keras.layers.Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(</span><br><span class="line">    loss=<span class="string">&#x27;sparse_categorical_crossentropy&#x27;</span>,</span><br><span class="line">    optimizer=tf.keras.optimizers.Adam(<span class="number">0.001</span>),</span><br><span class="line">    metrics=[<span class="string">&#x27;accuracy&#x27;</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">model.fit(</span><br><span class="line">    ds_train,</span><br><span class="line">    epochs=<span class="number">12</span>,</span><br><span class="line">    validation_data=ds_test,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">end_time = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Time consumed: &#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(end_time - start_time))</span><br></pre></td></tr></table></figure>
<h3 id="运行-TensorFlow-报错"><a href="#运行-TensorFlow-报错" class="headerlink" title="运行 TensorFlow 报错"></a>运行 TensorFlow 报错</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Could not find a version that satisfies the requirement tensorflow (from versions: none)</span><br><span class="line">ERROR: No matching distribution found for tensorflow</span><br></pre></td></tr></table></figure>
<p>原因：Python的版本过高。使用指令：python —version 查看当前使用的Python版本。TensorFlow支持的Python版本只到python3.5。</p>
<p>解决方案：</p>
<ol>
<li>把当前的Python卸载掉，安装python3.5</li>
<li>指定安装支持高版本Python的TensorFlow</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.12.0-py3-none-any.whl</span><br></pre></td></tr></table></figure>
<h3 id="tensorflow-加载数据集异常"><a href="#tensorflow-加载数据集异常" class="headerlink" title="tensorflow 加载数据集异常"></a>tensorflow 加载数据集异常</h3><p>异常错误提示：</p>
<p>tensorflow/core/platform/cloud/google_auth_provider.cc:184] All attempts to get a Google authentication bearer token failed, returning an empty token. Retrieving token from files failed with “Not found: Could not locate the credentials file.”. Retrieving token from GCE failed with “Failed precondition: Error executing an HTTP request: libcurl code 6 meaning ‘Couldn’t resolve host name’, error details: Couldn’t resolve host ‘metadata’”.</p>
<p>解决方法：改成如下对应的版本就行</p>
<p>tensorflow=2.3.0 and tensorflow-datasets=2.1.0</p>
<p>命令如下：</p>
<p>pip install tensorflow-datasets==2.1.0</p>
<p>想详细了解的同学可以去查看以下两个网址：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/PAIR-code/lit/issues/26">https://github.com/PAIR-code/lit/issues/26</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PAIR-code/lit/issues/22">https://github.com/PAIR-code/lit/issues/22</a></p>
<h3 id="M1-安装-pytorch"><a href="#M1-安装-pytorch" class="headerlink" title="M1 安装 pytorch"></a>M1 安装 pytorch</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">torch create virtual environment</span></span><br><span class="line">conda create -n torch_nightly_env python=3.8</span><br><span class="line">conda activate torch_nightly_env</span><br><span class="line">conda install PyTorch torchvision -c pytorch-nightly</span><br></pre></td></tr></table></figure>
<h3 id="m1-安装-qemu-卡死问题"><a href="#m1-安装-qemu-卡死问题" class="headerlink" title="m1 安装 qemu 卡死问题"></a>m1 安装 qemu 卡死问题</h3><p>按照官网步骤使用 brew 安装 qemu 之后，<code>make install</code> 会卡死在第一步，在这一 issue 中找到了解决方案:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/BASARANOMO/xv6-labs-2020/issues/1">https://github.com/BASARANOMO/xv6-labs-2020/issues/1</a></p>
<p>Then, download the qemu-5.1.0 and unzip the downloaded <code>.tar.xz</code> file:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://download.qemu.org/qemu-5.1.0.tar.xz</span></span><br></pre></td></tr></table></figure>
<p>Two patches are needed:<br><a target="_blank" rel="noopener" href="https://patchwork.kernel.org/project/qemu-devel/patch/20210103145055.11074-1-r.bolshakov@yadro.com/">patch1</a>: just download it and <code>cd</code> to the qemu directory, then:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">patch -p1 &lt; ../patch/v2-tcg-Fix-execution-on-Apple-Silicon.patch</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://gist.github.com/stefannilsson/8a083e07f4103af2520e87fdb1f50efc/revisions">patch2</a>: Two lines only. Find the file in qemu directory and modify it.<br>Then run configure with:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --disable-kvm --disable-werror --prefix=/usr/local --target-list=<span class="string">&quot;riscv64-softmmu&quot;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make install</span></span><br></pre></td></tr></table></figure>
<h3 id="Catalina-quarantine-for-corrupted-apps"><a href="#Catalina-quarantine-for-corrupted-apps" class="headerlink" title="Catalina quarantine for corrupted apps"></a>Catalina quarantine for corrupted apps</h3><p>低于 <code>Big Sur</code> 系统版本的 <code>macOS</code> 或 <code>m1</code> 芯片机器在安装一些未适配软件时候可能会出现 <code>安装包损坏, 打不开“XXX”,因为它来自身份不明的开发者</code> 等报错，在此状态下可以尝试以下做法。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br><span class="line">sudo xattr -r -d com.apple.quarantine /Applications/Sketch.app/</span><br><span class="line">// 输入 sudo xattr -r -d com.apple.quarantine 后将应用程序拖入 teminal 中</span><br></pre></td></tr></table></figure>
<p>（以及 Catalina 真的好耐看啊！）</p>
<h3 id="Homebrew国内源"><a href="#Homebrew国内源" class="headerlink" title="Homebrew国内源"></a>Homebrew国内源</h3><p><a target="_blank" rel="noopener" href="https://gitee.com/cunkai/HomebrewCN">https://gitee.com/cunkai/HomebrewCN</a></p>
<p>苹果电脑标准安装脚本：（推荐 优点全面 缺点慢一点）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure>
<p>苹果电脑极速安装脚本：（优点安装速度快 缺点update功能需要命令修复 ）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot; speed</span><br></pre></td></tr></table></figure>
<p>Linux 标准安装脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm Homebrew.sh ; wget https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh ; bash Homebrew.sh</span><br></pre></td></tr></table></figure>
<p>苹果电脑卸载脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)&quot;</span><br></pre></td></tr></table></figure>
<p>Linux卸载脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm HomebrewUninstall.sh ; wget https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh ; bash HomebrewUninstall.sh</span><br></pre></td></tr></table></figure>
<h3 id="删除-DS-Store"><a href="#删除-DS-Store" class="headerlink" title="删除 .DS_Store"></a>删除 .DS_Store</h3><p>删除当前目录及其子目录下的所有.DS_Store 文件:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &#x27;*.DS_Store&#x27; -type f -delete</span><br></pre></td></tr></table></figure>
<p>禁止.DS_store生成：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</span><br></pre></td></tr></table></figure>
<p>恢复.DS_store生成：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.apple.desktopservices DSDontWriteNetworkStores</span><br></pre></td></tr></table></figure>
<p>将 .DS_Store 加入到 .gitignore</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> .DS_Store &gt;&gt; ~/.gitignore</span><br></pre></td></tr></table></figure>
<h3 id="Python-镜像"><a href="#Python-镜像" class="headerlink" title="Python 镜像"></a>Python 镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">清华大学镜像：https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">阿里云：https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">中科大镜像：https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">豆瓣镜像：https://pypi.douban.com/simple/</span><br><span class="line">中科大镜像2：https://pypi.mirrors.ustc.edu.cn/simple/</span><br></pre></td></tr></table></figure>
<h2 id="Dev-Util"><a href="#Dev-Util" class="headerlink" title="Dev-Util"></a>Dev-Util</h2><h3 id="Google-Maps-API"><a href="#Google-Maps-API" class="headerlink" title="Google Maps API"></a>Google Maps API</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>网址</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><a target="_blank" rel="noopener" href="https://snazzymaps.com/">https://snazzymaps.com/</a></td>
<td>带有 JSON 代码和可下载示例的 Google 地图配色方案的存储库</td>
</tr>
<tr>
<td>2</td>
<td><a target="_blank" rel="noopener" href="https://googlemapsmania.blogspot.com/search/label/Styled%20Maps">https://googlemapsmania.blogspot.com/search/label/Styled%20Maps</a></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td><a target="_blank" rel="noopener" href="https://mapstyle.withgoogle.com/">https://mapstyle.withgoogle.com/</a></td>
</tr>
</tbody>
</table>
</div>
<h2 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h2><p>来源：“凯度信息之美奖”（The Kantar Information is Beautiful Awards）</p>
<ol>
<li>最佳信息之美奖（Most Beautiful）-《<a target="_blank" rel="noopener" href="https://www.buzzfeed.com/peteraldhous/spies-in-the-skies?utm_term=.igqaxKlxA6#.orXzGXJGjW">天空中的密探</a>》-作者：Peter Aldous 和 Charles Sefie（美国）</li>
</ol>
<blockquote>
<p>美国政府的空中监视行为截止到目前几乎不为人知。BuzzFeed News通过分析从航班追踪网站Flightradar24上得到的大约200架已辨别的联邦飞机位置数据，通过动态化的地图和路线图，借助VR技术形成了一幅前所未有的美国政府监视行动规模图景，为大家清晰展现一个政府监视下的美国。</p>
<p>解读 ：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzIwMDM5NzYyMQ==&amp;mid=2652450678&amp;idx=1&amp;sn=d55ad2d7691f8ddf8775c7a0995b2783&amp;scene=21#wechat_redirect">RUC工作坊作品：解析年度最佳数据可视化《天空中的密探》，清晰展现一个政府监视下的美国</a></p>
</blockquote>
<ol>
<li>数据可视化项目（Dataviz Project）金奖作品 -《<a target="_blank" rel="noopener" href="https://data-cuisine.net">数据美食</a>》 - 作者：Moritz Stefaner和Susanne Jaschko（德国）</li>
</ol>
<blockquote>
<p>（在伊朗，一半全球前500的网站被封禁，但是70%的年轻网络用户试用代理服务器访问这些网站。该图用意大利调味饭中不同颜色的米粒代表这些数据。其中上半部分的黄色米粒代表可访问的网站，下半部分代表被封禁的网站，下半部分的黄色米粒代表通过代理服务器进行访问的网站）</p>
<p>食物可以作为展示数据的工具吗？数据是什么味道？</p>
<p>数据美食工作坊将美食作为一种工具来展示数据。该工作坊由德国艺术设计网站Prozessagenten发起，由数据可视化专家Moritz Stefaner负责艺术设计。该工作坊会采用当地的食物来展示当地相关的数据，比如说用当地鱼类做的鱼汤来展示当地渔业的数据，用披萨来展示芬兰首都赫尔辛基的不同种族人口比率等。</p>
</blockquote>
<ol>
<li>交互可视化类（Interactive）金奖作品《<a target="_blank" rel="noopener" href="https://www.shipmap.org/">航运地图</a>》 - 作者：Robin Houston 和 Duncan Clark（英国）</li>
</ol>
<blockquote>
<p>基于2012全年全球商业航运数据的交互式3D地图，展示了现代商业航运的巨大规模，大型商船的航运路线，不同类型商船的地理分布和它们的碳排放量。这幅地图以动画片的形式呈现，在缓缓的音乐中还伴随着关于对商业航运的重要性、运输货物的重要河流及地区等的讲解。</p>
</blockquote>
<ol>
<li>数据可视化网站（Dataviz Website）金奖作品《<a target="_blank" rel="noopener" href="https://flowingdata.com">流动的数据</a>》作者：Nathan Yau（邱南森）</li>
</ol>
<blockquote>
<p>Flowingdata.com网站由数据统计师Nathan Yau运营，持续更新原创或整合的数据可视化内容。该网站上现在有大量的数据可视化作品、数据可视化学习教程和指南等。</p>
</blockquote>
<ol>
<li>商业项目（Commercial/biz Project）金奖作品<a target="_blank" rel="noopener" href="https://datausa.io/">《数据美国》</a></li>
</ol>
<blockquote>
<p>该网站由德勤（Deloitte）、Datawheel数据公司和麻省理工学院媒体实验室Macro Connections共同创建。数据美国是一个开放的免费资源平台，提供美国政府多家统计部门的官方数据，现有180多万个数据可视化成果，范围涵盖工业、教育、职场等多个领域。</p>
</blockquote>
<ol>
<li>年度最佳工作室（Studio of the Year）- Polygraph工作室</li>
</ol>
<blockquote>
<p>Polygraph斩获了今年的“年度最佳工作室”奖。工作室研究的话题广泛，相比用文字枯燥的表述，他们更喜欢借助画面、符号等动态信息开展对不同课题的研究。代表作品为《对话电影》和《音乐品味的变革》。</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="http://polygraph.cool/films/">《对话电影》</a>探讨了性别、社会背景、票房数据等因素对于电影的影响。通过数据鲜明反映出了当今电影的多元化趋势。</li>
<li><a target="_blank" rel="noopener" href="http://polygraph.cool/history/">《音乐品味的变革》</a>通过研究1958年至2015年公告牌歌曲的排名变化，展现各个时代音乐的流行趋势。</li>
</ul>
<ol>
<li>最佳团队奖（Outstanding Team）<a target="_blank" rel="noopener" href="https://fivethirtyeight.com">FiveThirtyEight</a> 网站</li>
</ol>
<blockquote>
<p>美国FiveThirtyEight网站团队获得此奖。该网站成立于2008年，特点是基于大量数据来预测新闻。最具代表性的作品便是通过棒球比赛数据成功预测出奥巴马将赢得美国总统大选。网站在不牺牲严密性和准确性的前提下，让数据新闻变得生动且通俗易懂，更加吸引读者。代表作品是《2016年美国大选预测》。话说小编很想知道这次特朗普当选FiveThirtyEight的预测是否靠谱啊。</p>
</blockquote>
<ol>
<li>最佳个人奖（Outstanding Individual）Moritz Stefaner（德国）- <a target="_blank" rel="noopener" href="http://project-ukko.net/">天神项目——季风能源预测</a></li>
</ol>
<blockquote>
<p>天气预报的预测范围局限于未来几周，气候预报的预测范围放眼于未来几年。对于能源交易商来说，了解未来几个月的风况则最为重要。基于复杂的气候模型，该项目将尝试用新的方法预测未来几个月的风况，为风能基地提供帮助。</p>
</blockquote>
<ol>
<li>数据可视化项目（Dataviz Project）金奖作品<a target="_blank" rel="noopener" href="http://data-cuisine.net/">《数据美食》</a>- 作者：Moritz Stefaner和Susanne Jaschko（德国）</li>
</ol>
<blockquote>
<p>（在伊朗，一半全球前500的网站被封禁，但是70%的年轻网络用户试用代理服务器访问这些网站。该图用意大利调味饭中不同颜色的米粒代表这些数据。其中上半部分的黄色米粒代表可访问的网站，下半部分代表被封禁的网站，下半部分的黄色米粒代表通过代理服务器进行访问的网站）</p>
<p>食物可以作为展示数据的工具吗？数据是什么味道？</p>
<p>数据美食工作坊将美食作为一种工具来展示数据。该工作坊由德国艺术设计网站Prozessagenten发起，由数据可视化专家Moritz Stefaner负责艺术设计。该工作坊会采用当地的食物来展示当地相关的数据，比如说用当地鱼类做的鱼汤来展示当地渔业的数据，用披萨来展示芬兰首都赫尔辛基的不同种族人口比率等。</p>
</blockquote>
<ol>
<li><a target="_blank" rel="noopener" href="http://scherabon.com/">《洛杉矶及芝加哥的收入差距》</a> - 作者：Herwig Scherabon（美国）</li>
</ol>
<blockquote>
<p>作者通过两张大图将洛杉矶和芝加哥的收入差距可视化。图中两座城市的矩形建筑物高度对应了每个区域的收入水平，清晰地展现了现代城市中的贫富差距。文中指出，大多数情况下，收入分化与种族隔离相关，暗指城市规划背后的政治操控。</p>
</blockquote>
<h2 id="Tornado-试用思考"><a href="#Tornado-试用思考" class="headerlink" title="Tornado 试用思考"></a>Tornado 试用思考</h2><p>Tornado 在物联网上结合 twisted 蛮好用的。tornado 主要用于 websocket/tcp 这些长连接数据流的场景，结合 async 很有效，python 生态里暂时应该没有更好的替代框架。tornado支持把底层事件循环换成 asyncio 的循环。接着 gevent 还可以把 asyncio 的循环再 patch掉。这样 tornado 可以轻松异步调用任何支持 asyncio 或 gevent 的库。同时在 Windows 上使用 gevent (IOCP) 的 tornado 会有非常恐怖的并发能力。如果供 web CRUD 或者 restful 接口设计，优势不大。几个主流 python 框架更多是互补关系，不是竞争关系。</p>
<h2 id="Duplicate-Refresh-of-FetchRequest-in-the-Sheet-Detents-Change"><a href="#Duplicate-Refresh-of-FetchRequest-in-the-Sheet-Detents-Change" class="headerlink" title="Duplicate Refresh of FetchRequest in the Sheet Detents Change"></a>Duplicate Refresh of FetchRequest in the Sheet Detents Change</h2><p>Sheet detent 改变的时候 Fetchrequest 都会被重新请求一次。这样在用户频繁的 sheet 交互中会造成严重的性能问题</p>
<ol>
<li><strong>Debounce 输入防抖处理</strong>：防止用户快速输入时频繁触发后台任务。使用 Combine 的 .debounce 方法来减少频繁的输入请求，这样只有在用户停止输入一定时间后才会触发搜索操作，减少不必要的后台任务。DispatchQueue 或 Combine 可以用于实现此功能。</li>
<li><strong>防止不必要的刷新</strong>：每次 sheet detent 改变时导致 FetchRequest 重新刷新，可能是因为 SwiftUI 在某些条件下会重新计算视图。如果 FetchRequest 在视图中定义，视图重新计算时会重新发起查询。我们可以考虑将 FetchRequest 与 View 逻辑分离，使用 @ObservedObject 或 @StateObject 来持久化状态，利用 @ObservedObject 或 @StateObject 来创建和管理一个 ViewModel，将数据获取逻辑从视图中分离出来，这样可以更好地控制数据的刷新逻辑，并且在 View 重新计算时不会重新发起请求，避免 FetchRequest 在视图生命周期中的自动刷新。</li>
</ol>
<h2 id="JVM-Reflection"><a href="#JVM-Reflection" class="headerlink" title="JVM Reflection"></a>JVM Reflection</h2><p>JVM为每个加载的<code>class</code>及<code>interface</code>创建了对应的<code>Class</code>实例来保存<code>class</code>及<code>interface</code>的所有信息；</p>
<p>获取一个<code>class</code>对应的<code>Class</code>实例后，就可以获取该<code>class</code>的所有信息；</p>
<p>通过Class实例获取<code>class</code>信息的方法称为反射（Reflection）；</p>
<p>JVM总是动态加载<code>class</code>，可以在运行期根据条件来控制加载class。</p>
<h2 id="Binding-get-和-set-实现对任意数据源的双向绑定"><a href="#Binding-get-和-set-实现对任意数据源的双向绑定" class="headerlink" title="Binding get 和 set 实现对任意数据源的双向绑定"></a>Binding get 和 set 实现对任意数据源的双向绑定</h2><p>闭包（closures）在编程中有许多重要作用，尤其在 Swift 语言中，它们提供了强大的功能和灵活性。以下是闭包的主要作用和适用场景：</p>
<p>​    1.    <strong>匿名函数</strong>：闭包允许你创建没有名字的内联函数，用于临时任务或一次性操作。</p>
<p>​    2.    <strong>捕获和存储状态</strong>：闭包可以捕获其上下文中的变量，并在以后使用这些变量，即使变量的原始作用域已经销毁。</p>
<p>​    3.    <strong>回调和异步操作</strong>：闭包常用于回调函数中，处理异步操作的结果，例如网络请求、动画完成处理等。</p>
<p>​    4.    <strong>函数作为参数和返回值</strong>：闭包可以作为参数传递给函数，也可以作为函数的返回值，从而实现高阶函数和函数式编程。</p>
<p>​    5.    <strong>简化代码和提高可读性</strong>：在许多情况下，闭包可以使代码更简洁和更具可读性，尤其是在处理集合、排序和过滤时。</p>
<p><strong>适用场景</strong></p>
<p><strong>1. 回调函数</strong></p>
<p>回调函数是闭包最常见的使用场景之一。它们允许你在某个操作完成后执行特定的代码，例如网络请求完成后处理响应数据。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fetchData</span>(<span class="params">completion</span>: <span class="keyword">@escaping</span> (<span class="type">Data</span>?, <span class="type">Error</span>?) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">// 模拟网络请求</span></span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        <span class="keyword">let</span> data <span class="operator">=</span> <span class="type">Data</span>() <span class="comment">// 假设获取了一些数据</span></span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            completion(data, <span class="literal">nil</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetchData &#123; data, error <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data <span class="operator">=</span> data &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Data received: <span class="subst">\(data)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error: <span class="subst">\(error.localizedDescription)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. 处理集合</strong></p>
<p>闭包用于 Swift 的标准库方法，如 map、filter 和 reduce，可以简化集合的处理。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> squaredNumbers <span class="operator">=</span> numbers.map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="variable">$0</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(squaredNumbers) <span class="comment">// 输出: [1, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> evenNumbers <span class="operator">=</span> numbers.filter &#123; <span class="variable">$0</span> <span class="operator">%</span> <span class="number">2</span> <span class="operator">==</span> <span class="number">0</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(evenNumbers) <span class="comment">// 输出: [2, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum <span class="operator">=</span> numbers.reduce(<span class="number">0</span>) &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="variable">$1</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(sum) <span class="comment">// 输出: 15</span></span><br></pre></td></tr></table></figure>
<p><strong>3. 排序</strong></p>
<p>闭包用于定义自定义的排序逻辑。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names <span class="operator">=</span> [<span class="string">&quot;Charlie&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sortedNames <span class="operator">=</span> names.sorted &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="variable">$1</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(sortedNames) <span class="comment">// 输出: [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;]</span></span><br></pre></td></tr></table></figure>
<p><strong>4. 动画和视图更新</strong></p>
<p>闭包常用于动画的开始和结束处理，以及视图的状态更新。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UIView</span>.animate(withDuration: <span class="number">0.5</span>, animations: &#123;</span><br><span class="line">    myView.alpha <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line">&#125;) &#123; finished <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> finished &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Animation completed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5. 自定义操作</strong></p>
<p>闭包允许你在某些操作中传递自定义的行为，例如自定义操作的实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">performOperation</span>(<span class="keyword">_</span> <span class="params">operation</span>: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span>, <span class="params">on</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="params">and</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> operation(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> performOperation(&#123; (a, b) <span class="keyword">in</span> a <span class="operator">*</span> b &#125;, on: <span class="number">4</span>, and: <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment">// 输出: 8</span></span><br></pre></td></tr></table></figure>
<p><strong>6. 延迟执行</strong></p>
<p>闭包用于延迟执行代码，直到某个条件满足或某个事件发生。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">delay</span>(<span class="params">seconds</span>: <span class="type">Double</span>, <span class="params">completion</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> seconds) &#123;</span><br><span class="line">        completion()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delay(seconds: <span class="number">2.0</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;This message is printed after a 2-second delay&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>READ NEXT</span></section><section class="body fs14"><div class="line"></div><a id="prev" href="/2024/07/15/-%20FRND-Skillset/">FE 随手记<span class="note">Newer</span></a></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</p>
<p>This site was deployed by <a href="http://example.com/">@zennlyu</a> using <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0" title="v1.8.0">Stellar</a>.</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://fastly.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://fastly.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://fastly.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti/umd/heti.min.css","js":"https://unpkg.com/heti/umd/heti-addon.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
