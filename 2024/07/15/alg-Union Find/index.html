<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://fastly.jsdelivr.net'>
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>coursera 1.5 UNION_FIND - zennlyu</title>

  
    <meta name="description" content="‣ DYNAMIC CONNECTIVITYGiven a set of N objects. Union command: connect two objects. Find&#x2F;connected query: is there a path connecting the two objects?  Modeling the objectsApplications involve man">
<meta property="og:type" content="article">
<meta property="og:title" content="coursera 1.5 UNION_FIND">
<meta property="og:url" content="http://example.com/2024/07/15/alg-Union%20Find/index.html">
<meta property="og:site_name" content="zennlyu">
<meta property="og:description" content="‣ DYNAMIC CONNECTIVITYGiven a set of N objects. Union command: connect two objects. Find&#x2F;connected query: is there a path connecting the two objects?  Modeling the objectsApplications involve man">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/UF.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/weight.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/quick-union.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/log.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/log.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/id.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/percolation.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/perrcolations.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/p*.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/opensite.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/top-down.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/per.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/perco.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/site-vacancy.png">
<meta property="og:image" content="http://example.com/2024/07/15/alg-Union%20Find/opensites.png">
<meta property="article:published_time" content="2024-07-15T03:58:26.063Z">
<meta property="article:modified_time" content="2024-07-15T03:58:26.063Z">
<meta property="article:author" content="zennlyu">
<meta property="article:tag" content="princeton-alg">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/07/15/alg-Union%20Find/UF.png">
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  


  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    


<header class="header">

<div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://i.imgtg.com/2022/07/09/eTtVL.jpg" onerror="javascript:this.classList.add('error');this.src='https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main">zennlyu</div></a></div>
<nav class="menu dis-select"><a class="nav-item active" href="/">Blog</a><a class="nav-item" href="/more/">更多</a></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">TOC</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%A3-DYNAMIC-CONNECTIVITY"><span class="toc-text">‣ DYNAMIC CONNECTIVITY</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Given-a-set-of-N-objects"><span class="toc-text">Given a set of N objects.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Modeling-the-objects"><span class="toc-text">Modeling the objects</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Modeling-the-connections"><span class="toc-text">Modeling the connections</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementing-the-operations"><span class="toc-text">Implementing the operations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Union-find-data-type-API"><span class="toc-text">Union-find data type (API)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dynamic-connectivity-client"><span class="toc-text">Dynamic-connectivity client</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%A3-QUICK-FIND"><span class="toc-text">‣ QUICK-FIND</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Eager-approach"><span class="toc-text">Eager approach</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Structure"><span class="toc-text">Data Structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Find"><span class="toc-text">Find.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Union"><span class="toc-text">Union.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-Find-is-too-slow"><span class="toc-text">Quick-Find is too slow</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Quadratic-algorithms-do-not-scale"><span class="toc-text">Quadratic algorithms do not scale</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%A3-QUICK-UNION"><span class="toc-text">‣ QUICK-UNION</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Lazy-approach"><span class="toc-text">Lazy approach</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-structure"><span class="toc-text">Data structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Find-1"><span class="toc-text">Find.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Union-1"><span class="toc-text">Union.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-union-is-also-too-slow"><span class="toc-text">Quick-union is also too slow</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Quick-find-defect"><span class="toc-text">Quick-find defect.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Quick-union-defect"><span class="toc-text">Quick-union defect.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%A3-IMPROVEMENT"><span class="toc-text">‣ IMPROVEMENT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Weighted-quick-union"><span class="toc-text">1 Weighted quick-union.</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Quick-union-and-weighted-quick-union-example"><span class="toc-text">Quick-union and weighted quick-union example</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Weighted-quick-union-Java-implementation"><span class="toc-text">Weighted quick-union: Java implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Data-structure-1"><span class="toc-text">Data structure.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Find-2"><span class="toc-text">Find.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Union-2"><span class="toc-text">Union.</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Weighted-quick-union-analysis"><span class="toc-text">Weighted quick-union analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Running-time"><span class="toc-text">Running time.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Proposition"><span class="toc-text">Proposition.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Pf-When-does-depth-of-x-increase"><span class="toc-text">Pf. When does depth of x increase?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Improvement-2-path-compression"><span class="toc-text">Improvement 2: path compression</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Quick-union-with-path-compression"><span class="toc-text">Quick union with path compression.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Path-compression-Java-implementation"><span class="toc-text">Path compression: Java implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Two-pass-implementation"><span class="toc-text">Two-pass implementation:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Simpler-one-pass-variant"><span class="toc-text">Simpler one-pass variant:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#In-practice"><span class="toc-text">In practice.</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Weighted-quick-union-with-path-compression-amortized-analysis"><span class="toc-text">Weighted quick-union with path compression: amortized analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Proposition-Hopcroft-Ulman-Tarjan"><span class="toc-text">Proposition. |[Hopcroft-Ulman, Tarjan]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Linear-time-algorithm-for-M-union-find-ops-on-N-objects"><span class="toc-text">Linear-time algorithm for M union-find ops on N objects?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Amazing-fact-Fredman-Saks"><span class="toc-text">Amazing fact. |[Fredman-Saks]</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Summary"><span class="toc-text">Summary</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Bottom-line"><span class="toc-text">Bottom line.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Ex-109-unions-and-finds-with-109-objects"><span class="toc-text">Ex. | [109 unions and finds with 109 objects]</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%A3-APPLICATIONS"><span class="toc-text">‣ APPLICATIONS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Union-find-applications"><span class="toc-text">Union-find applications</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Percolation"><span class="toc-text">Percolation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-model-for-many-physical-systems"><span class="toc-text">A model for many physical systems:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Likelihood-of-percolation"><span class="toc-text">Likelihood of percolation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Percolation-phase-transition"><span class="toc-text">Percolation phase transition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Monte-Carlo-simulation"><span class="toc-text">Monte Carlo simulation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dynamic-connectivity-solution-to-estimate-percolation-threshold"><span class="toc-text">Dynamic connectivity solution to estimate percolation threshold</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Q-How-to-check-whether-an-N-by-N-system-percolates"><span class="toc-text">Q. How to check whether an N-by-N system percolates?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Q-How-to-check-whether-an-N-by-N-system-percolates-1"><span class="toc-text">Q. How to check whether an N-by-N system percolates?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Clever-trick"><span class="toc-text">Clever trick.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Q-How-to-model-opening-a-new-site"><span class="toc-text">Q. How to model opening a new site?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Percolation-Exercise"><span class="toc-text">Percolation Exercise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Java-Environment"><span class="toc-text">Java Environment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Percolation-1"><span class="toc-text">Percolation.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-model"><span class="toc-text">The model.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-problem"><span class="toc-text">The problem.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Percolation-data-type"><span class="toc-text">Percolation data type.</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Corner-cases"><span class="toc-text">Corner cases.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Performance-requirements"><span class="toc-text">Performance requirements.</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Monte-Carlo-simulation-1"><span class="toc-text">Monte Carlo simulation.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Analysis-of-running-time-and-memory-usage-optional-and-not-graded"><span class="toc-text">Analysis of running time and memory usage (optional and not graded).</span></a></li></ol></li></ol></li></ol></div></div></div>


</div>


    </aside>
    <div class='l_main'>
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/algorithms/">algorithms</a></div><div id="post-meta">Posted on&nbsp;<time datetime="2024-07-15T03:58:26.063Z">2024-07-15</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>coursera 1.5 UNION_FIND</span></h1>
<h2 id="‣-DYNAMIC-CONNECTIVITY"><a href="#‣-DYNAMIC-CONNECTIVITY" class="headerlink" title="‣ DYNAMIC CONNECTIVITY"></a>‣ DYNAMIC CONNECTIVITY</h2><h3 id="Given-a-set-of-N-objects"><a href="#Given-a-set-of-N-objects" class="headerlink" title="Given a set of N objects."></a>Given a set of N objects.</h3><ul>
<li>Union command: connect two objects.</li>
<li>Find&#x2F;connected query: is there a path connecting the two objects?</li>
</ul>
<h3 id="Modeling-the-objects"><a href="#Modeling-the-objects" class="headerlink" title="Modeling the objects"></a>Modeling the objects</h3><p>Applications involve manipulating objects of all types.</p>
<ul>
<li>Pixels in a digital photo.</li>
<li>Computers in a network.</li>
<li>Friends in a social network. </li>
<li>Transistors in a computer chip. </li>
<li>Elements in a mathematical set. </li>
<li>Variable names in Fortran program. </li>
<li>Metallic sites in a composite system.</li>
</ul>
<p>When programming, convenient to name objects 0 to N –1.</p>
<ul>
<li><p>Use integers as array index.</p>
</li>
<li><p>Suppress details not relevant to union-find.</p>
<blockquote>
<p>(can use ST to translate from site names to integers: stay tuned (Chapter 3))</p>
</blockquote>
</li>
</ul>
<h3 id="Modeling-the-connections"><a href="#Modeling-the-connections" class="headerlink" title="Modeling the connections"></a>Modeling the connections</h3><p>We assume “is connected to” is an equivalence relation:</p>
<ul>
<li><strong>Reflexive:</strong> <em>p</em> is connected to <em>p</em>.</li>
<li><strong>Symmetric:</strong> if <em>p</em> is connected to <em>q</em>, then <em>q</em> is connected to <em>p</em>. </li>
<li><strong>Transitive:</strong> if <em>p</em> is connected to <em>q</em> and <em>q</em> is connected to <em>r</em>, then <em>p</em> is connected to <em>r</em>.</li>
</ul>
<h3 id="Implementing-the-operations"><a href="#Implementing-the-operations" class="headerlink" title="Implementing the operations"></a>Implementing the operations</h3><ul>
<li><strong>Find query.</strong> Check if two objects are in the same component.</li>
<li><strong>Union command.</strong> Replace components containing two objects with their union.</li>
</ul>
<h3 id="Union-find-data-type-API"><a href="#Union-find-data-type-API" class="headerlink" title="Union-find data type (API)"></a>Union-find data type (API)</h3><p><strong>Goal.</strong> Design efficient data structure for union-find.</p>
<ul>
<li>Number of objects <em>N</em> can be huge.</li>
<li>Number of operations <em>M</em> can be huge.</li>
<li>Find queries and union commands may be intermixed.</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/UF.png" alt="UF"></p>
<h3 id="Dynamic-connectivity-client"><a href="#Dynamic-connectivity-client" class="headerlink" title="Dynamic-connectivity client"></a>Dynamic-connectivity client</h3><ul>
<li>・Read in number of objects <em>N</em> from standard input. </li>
<li>・Repeat:<ul>
<li>–  read in pair of integers from standard input</li>
<li>–  if they are not yet connected, connect them and print out pair</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> StdIn.readInt(); </span><br><span class="line">	<span class="type">UF</span> <span class="variable">uf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UF</span>(N);</span><br><span class="line">	<span class="keyword">while</span> (!StdIn.isEmpty()) &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> StdIn.readInt(); </span><br><span class="line">		<span class="type">int</span> <span class="variable">q</span> <span class="operator">=</span> StdIn.readInt(); </span><br><span class="line">		<span class="keyword">if</span> (!uf.connected(p, q)) &#123;</span><br><span class="line">			uf.union(p, q);</span><br><span class="line">			StdOut.println(p + <span class="string">&quot; &quot;</span> + q); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="‣-QUICK-FIND"><a href="#‣-QUICK-FIND" class="headerlink" title="‣ QUICK-FIND"></a>‣ QUICK-FIND</h2><h3 id="Eager-approach"><a href="#Eager-approach" class="headerlink" title="Eager approach"></a>Eager approach</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickFindUF</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickFindUF</span><span class="params">(<span class="type">int</span> N)</span></span><br><span class="line">    &#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            id[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">connected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span></span><br><span class="line">    &#123;   <span class="keyword">return</span> id[p] == id[q];  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pid</span> <span class="operator">=</span> id[p];</span><br><span class="line">        <span class="type">int</span> <span class="variable">qid</span> <span class="operator">=</span> id[q];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; id.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid)</span><br><span class="line">                id[i] = qid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Data-Structure"><a href="#Data-Structure" class="headerlink" title="Data Structure"></a>Data Structure</h4><ul>
<li>Integer array <code>id[]</code> of length N.</li>
<li>Interpretation: <code>p</code> and <code>q</code> are connected <code>iff</code> they have the same id.</li>
</ul>
<h4 id="Find"><a href="#Find" class="headerlink" title="Find."></a>Find.</h4><p>Check if p and q have the same id.</p>
<h4 id="Union"><a href="#Union" class="headerlink" title="Union."></a>Union.</h4><p>To merge components containing <code>p</code> and <code>q</code>, change all entries whose id equals <code>id[p]</code> to <code>id[q]</code>.</p>
<h3 id="Quick-Find-is-too-slow"><a href="#Quick-Find-is-too-slow" class="headerlink" title="Quick-Find is too slow"></a>Quick-Find is too slow</h3><p><strong>Cost model.</strong> Number of array accesses (for read or write).</p>
<p><strong>order of growth of number of array accesses</strong>:</p>
<table>
<thead>
<tr>
<th>Algorithms</th>
<th>Initialize</th>
<th>Union</th>
<th>Find</th>
</tr>
</thead>
<tbody><tr>
<td>Quick-find</td>
<td>N</td>
<td>N</td>
<td>1</td>
</tr>
</tbody></table>
<p><strong>Union is too expensive</strong> :It takes $N^2$ array accesses to process a sequence of $N$ union commands on $N$ objects.</p>
<h4 id="Quadratic-algorithms-do-not-scale"><a href="#Quadratic-algorithms-do-not-scale" class="headerlink" title="Quadratic algorithms do not scale"></a>Quadratic algorithms do not scale</h4><h2 id="‣-QUICK-UNION"><a href="#‣-QUICK-UNION" class="headerlink" title="‣ QUICK-UNION"></a>‣ QUICK-UNION</h2><h3 id="Lazy-approach"><a href="#Lazy-approach" class="headerlink" title="Lazy approach"></a>Lazy approach</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickUnionUF</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickUnionUF</span><span class="params">(<span class="type">int</span> N)</span></span><br><span class="line">    &#123;		<span class="comment">// set id of each object to itself (N array accesses)</span></span><br><span class="line">        id = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">root</span><span class="params">(<span class="type">int</span> i)</span></span><br><span class="line">    &#123;		<span class="comment">// chase parent pointers until reach root (depth of i array accesses)</span></span><br><span class="line">        <span class="keyword">while</span> (i != id[i])  i = id[i];</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">connected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span></span><br><span class="line">    <span class="comment">// check if p and q have same root (depth of p and q array accesses)</span></span><br><span class="line">    &#123;   <span class="keyword">return</span> root[p] == root[q];  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span></span><br><span class="line">    &#123;		<span class="comment">// change root of p to point to root of q (depth of p and q array accesses)</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> root(p);</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> root(q);</span><br><span class="line">        id[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Data-structure"><a href="#Data-structure" class="headerlink" title="Data structure"></a>Data structure</h4><ul>
<li>Integer array <code>id[]</code> of length <code>N</code>. </li>
<li>Interpretation: <code>id[i]</code> is parent of <code>i</code>. </li>
<li>Root of i is <code>id[id[id[...id[i]...]]]</code>(keep going until it doesn’t change (algorithm ensures no cycles))</li>
</ul>
<h4 id="Find-1"><a href="#Find-1" class="headerlink" title="Find."></a><strong>Find.</strong></h4><p>Check if p and q have the same root.</p>
<h4 id="Union-1"><a href="#Union-1" class="headerlink" title="Union."></a><strong>Union.</strong></h4><p>To merge components containing p and q, set the id of p’s root to the id of q’s root.</p>
<h3 id="Quick-union-is-also-too-slow"><a href="#Quick-union-is-also-too-slow" class="headerlink" title="Quick-union is also too slow"></a>Quick-union is also too slow</h3><p>Cost model. Number of array accesses (for read or write).</p>
<table>
<thead>
<tr>
<th>Algorithms</th>
<th>Initialize</th>
<th>Union</th>
<th>Find</th>
</tr>
</thead>
<tbody><tr>
<td>Quick-find</td>
<td>N</td>
<td>N</td>
<td>1</td>
</tr>
<tr>
<td>Quick-union(worst case)</td>
<td>N</td>
<td>$N^†$($†$ includes cost of finding roots)</td>
<td>N</td>
</tr>
</tbody></table>
<h4 id="Quick-find-defect"><a href="#Quick-find-defect" class="headerlink" title="Quick-find defect."></a>Quick-find defect.</h4><ul>
<li>Union too expensive ( $N$ array accesses).</li>
<li>Trees are flat, but too expensive to keep them flat.</li>
</ul>
<h4 id="Quick-union-defect"><a href="#Quick-union-defect" class="headerlink" title="Quick-union defect."></a>Quick-union defect.</h4><ul>
<li>Trees can get tall.</li>
<li>Find too expensive (could be <em>N</em> array accesses).</li>
</ul>
<h2 id="‣-IMPROVEMENT"><a href="#‣-IMPROVEMENT" class="headerlink" title="‣ IMPROVEMENT"></a>‣ IMPROVEMENT</h2><h3 id="1-Weighted-quick-union"><a href="#1-Weighted-quick-union" class="headerlink" title="1 Weighted quick-union."></a>1 Weighted quick-union.</h3><ul>
<li><p>Modify quick-union to avoid tall trees.</p>
</li>
<li><p>Keep track of size of each tree (number of objects).</p>
</li>
<li><p>Balance by linking root of smaller tree to root of larger tree.</p>
<blockquote>
<p>(reasonable alternatives: union by height or “rank”)</p>
</blockquote>
</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/weight.png" alt="weight"></p>
<h4 id="Quick-union-and-weighted-quick-union-example"><a href="#Quick-union-and-weighted-quick-union-example" class="headerlink" title="Quick-union and weighted quick-union example"></a>Quick-union and weighted quick-union example</h4><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/quick-union.png" alt="quick-union"></p>
<h4 id="Weighted-quick-union-Java-implementation"><a href="#Weighted-quick-union-Java-implementation" class="headerlink" title="Weighted quick-union: Java implementation"></a>Weighted quick-union: Java implementation</h4><h5 id="Data-structure-1"><a href="#Data-structure-1" class="headerlink" title="Data structure."></a>Data structure.</h5><p>Same as quick-union, but maintain extra array <code>sz[i]</code> to count number of objects in the tree rooted at <code>i</code>.</p>
<h5 id="Find-2"><a href="#Find-2" class="headerlink" title="Find."></a>Find.</h5><p>Identical to quick-union. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> root(p) == root(q);</span><br></pre></td></tr></table></figure>

<h5 id="Union-2"><a href="#Union-2" class="headerlink" title="Union."></a>Union.</h5><p>Modify quick-union to:</p>
<ul>
<li>Link root of smaller tree to root of larger tree. </li>
<li>Update the <code>sz[]</code> array.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> root(p);</span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> root(q);</span><br><span class="line"><span class="keyword">if</span> (i == j) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span> (sz[i] &lt; sz[j])  &#123;   id[i] = j; sz[j] += sz[i];    &#125;</span><br><span class="line"><span class="keyword">else</span>                &#123;   id[j] = i; sz[i] += sz[j];    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Weighted-quick-union-analysis"><a href="#Weighted-quick-union-analysis" class="headerlink" title="Weighted quick-union analysis"></a>Weighted quick-union analysis</h4><h5 id="Running-time"><a href="#Running-time" class="headerlink" title="Running time."></a>Running time.</h5><ul>
<li>Find: takes time proportional to depth of <em>p</em> and <em>q</em>. </li>
<li>Union: takes constant time, given roots.</li>
</ul>
<h5 id="Proposition"><a href="#Proposition" class="headerlink" title="Proposition."></a>Proposition.</h5><p>($lg&#x3D;base-2$ logarithm) Depth of any node $x$ is at most $lgN$</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/log.png" alt="log"></p>
<h5 id="Pf-When-does-depth-of-x-increase"><a href="#Pf-When-does-depth-of-x-increase" class="headerlink" title="Pf. When does depth of x increase?"></a>Pf. When does depth of <em>x</em> increase?</h5><p>Increases by $1$ when tree $T_1$ containing $x$ is merged into another tree $T_2$.</p>
<ul>
<li><p>The size of the tree containing $x$ at least doubles since $|T_2|≥|T_1|$. </p>
</li>
<li><p>Size of tree containing $x$ can double at most $lgN$ times. Why?</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/log.png" alt="log"></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Algorithms</th>
<th>Initialize</th>
<th>Union</th>
<th>Find</th>
</tr>
</thead>
<tbody><tr>
<td>Quick-find</td>
<td>N</td>
<td>N</td>
<td>1</td>
</tr>
<tr>
<td>Quick-union(worst case)</td>
<td>N</td>
<td>$N^†$($†$ includes cost of finding roots)</td>
<td>N</td>
</tr>
<tr>
<td>weighted QU</td>
<td>N</td>
<td>$lgN^†$</td>
<td>$lgN$</td>
</tr>
</tbody></table>
<p>Q. Stop at guaranteed acceptable performance? </p>
<p>A. No, easy to improve further.</p>
<h3 id="Improvement-2-path-compression"><a href="#Improvement-2-path-compression" class="headerlink" title="Improvement 2: path compression"></a>Improvement 2: path compression</h3><h4 id="Quick-union-with-path-compression"><a href="#Quick-union-with-path-compression" class="headerlink" title="Quick union with path compression."></a>Quick union with path compression.</h4><p>Just after computing the root of <em>p</em>, set the id of each examined node to point to that root.</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/id.png" alt="id"></p>
<h4 id="Path-compression-Java-implementation"><a href="#Path-compression-Java-implementation" class="headerlink" title="Path compression: Java implementation"></a>Path compression: Java implementation</h4><h5 id="Two-pass-implementation"><a href="#Two-pass-implementation" class="headerlink" title="Two-pass implementation:"></a>Two-pass implementation:</h5><p>add second loop to root() to set the id[] of each examined node to the root.</p>
<h5 id="Simpler-one-pass-variant"><a href="#Simpler-one-pass-variant" class="headerlink" title="Simpler one-pass variant:"></a>Simpler one-pass variant:</h5><p>Make every other node in path point to its grandparent (thereby halving path length).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">root</span><span class="params">(<span class="type">int</span> i)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (i != id[i]) </span><br><span class="line">    &#123;</span><br><span class="line">        id[i] = id[id[i]];  <span class="comment">// only one extra line of code !</span></span><br><span class="line">        i = id[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="In-practice"><a href="#In-practice" class="headerlink" title="In practice."></a>In practice.</h5><p>No reason not to! Keeps tree almost completely flat.</p>
<h4 id="Weighted-quick-union-with-path-compression-amortized-analysis"><a href="#Weighted-quick-union-with-path-compression-amortized-analysis" class="headerlink" title="Weighted quick-union with path compression: amortized analysis"></a>Weighted quick-union with path compression: amortized analysis</h4><h5 id="Proposition-Hopcroft-Ulman-Tarjan"><a href="#Proposition-Hopcroft-Ulman-Tarjan" class="headerlink" title="Proposition. |[Hopcroft-Ulman, Tarjan]"></a>Proposition. |[Hopcroft-Ulman, Tarjan]</h5><p>Starting from an empty data structure, any sequence of $M$ union-find ops on $N$ objects makes  $≤c;(N+M;lg*N)$ array accesses.</p>
<ul>
<li>Analysis can be improved to $N+M;α(M,N)$. </li>
<li>Simple algorithm with fascinating mathematics.</li>
</ul>
<p><strong>iterate log function</strong>:</p>
<table>
<thead>
<tr>
<th>N</th>
<th>lg* N</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>16</td>
<td>3</td>
</tr>
<tr>
<td>65536</td>
<td>4</td>
</tr>
<tr>
<td>$2^{65536}$</td>
<td>5</td>
</tr>
</tbody></table>
<h5 id="Linear-time-algorithm-for-M-union-find-ops-on-N-objects"><a href="#Linear-time-algorithm-for-M-union-find-ops-on-N-objects" class="headerlink" title="Linear-time algorithm for M union-find ops on N objects?"></a>Linear-time algorithm for <em>M</em> union-find ops on <em>N</em> objects?</h5><ul>
<li>Cost within constant factor of reading in the data.</li>
<li>In theory, WQUPC is not quite linear.</li>
<li>In practice, WQUPC is linear.</li>
</ul>
<h5 id="Amazing-fact-Fredman-Saks"><a href="#Amazing-fact-Fredman-Saks" class="headerlink" title="Amazing fact. |[Fredman-Saks]"></a>Amazing fact. |[Fredman-Saks]</h5><blockquote>
<p>in “cell-probe” model of computation</p>
</blockquote>
<p>No linear-time algorithm exists</p>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><h5 id="Bottom-line"><a href="#Bottom-line" class="headerlink" title="Bottom line."></a>Bottom line.</h5><p>Weighted quick union (with path compression) makes it possible to solve problems that could not otherwise be addressed.</p>
<h5 id="Ex-109-unions-and-finds-with-109-objects"><a href="#Ex-109-unions-and-finds-with-109-objects" class="headerlink" title="Ex. | [109 unions and finds with 109 objects]"></a>Ex. | [109 unions and finds with 109 objects]</h5><ul>
<li>WQUPC reduces time from 30 years to 6 seconds.</li>
<li>Supercomputer won’t help much; good algorithm enables solution.</li>
</ul>
<h2 id="‣-APPLICATIONS"><a href="#‣-APPLICATIONS" class="headerlink" title="‣ APPLICATIONS"></a>‣ APPLICATIONS</h2><h3 id="Union-find-applications"><a href="#Union-find-applications" class="headerlink" title="Union-find applications"></a>Union-find applications</h3><ul>
<li>Percolation.</li>
<li>Games (Go, Hex).</li>
<li>Dynamic connectivity.  ✓ </li>
<li>Least common ancestor.</li>
<li>Equivalence of finite state automata. </li>
<li>Hoshen-Kopelman algorithm in physics. </li>
<li>Hinley-Milner polymorphic type inference. </li>
<li>Kruskal’s minimum spanning tree algorithm. </li>
<li>Compiling equivalence statements in Fortran. </li>
<li>Morphological attribute openings and closings. </li>
<li>Matlab’s bwlabel() function in image processing.</li>
</ul>
<h3 id="Percolation"><a href="#Percolation" class="headerlink" title="Percolation"></a>Percolation</h3><h4 id="A-model-for-many-physical-systems"><a href="#A-model-for-many-physical-systems" class="headerlink" title="A model for many physical systems:"></a>A model for many physical systems:</h4><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/percolation.png" alt="percolation"></p>
<ul>
<li><em>N</em>-by-<em>N</em> grid of sites.</li>
<li>Each site is open with probability $p$ (or blocked with probability $1–p$). </li>
<li>System percolates <code>iff</code> top and bottom are connected by open sites.</li>
</ul>
<h4 id="Likelihood-of-percolation"><a href="#Likelihood-of-percolation" class="headerlink" title="Likelihood of percolation"></a>Likelihood of percolation</h4><blockquote>
<p>Depends on site vacancy probability <em>p</em>.</p>
</blockquote>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/perrcolations.png" alt="perrcolations"></p>
<h4 id="Percolation-phase-transition"><a href="#Percolation-phase-transition" class="headerlink" title="Percolation phase transition"></a>Percolation phase transition</h4><p>When $N$ is large, theory guarantees a sharp threshold $p^*$.</p>
<ul>
<li>$p&gt;p^*$: almost certainly percolates.</li>
<li>$p&lt;p^*$: almost certainly does not percolate.</li>
</ul>
<p>Q. What is the value of $p^*$ ?</p>
<p>A. About 0.592746 for large square lattices.</p>
<blockquote>
<p>constant known only via simulation</p>
</blockquote>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/p*.png" alt="p*"></p>
<h4 id="Monte-Carlo-simulation"><a href="#Monte-Carlo-simulation" class="headerlink" title="Monte Carlo simulation"></a>Monte Carlo simulation</h4><ul>
<li>Initialize $N-by-N$ whole grid to be blocked.</li>
<li>Declare random sites open until top connected to bottom. </li>
<li>Vacancy percentage estimates $p^*$.</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/opensite.png" alt="opensite"></p>
<h4 id="Dynamic-connectivity-solution-to-estimate-percolation-threshold"><a href="#Dynamic-connectivity-solution-to-estimate-percolation-threshold" class="headerlink" title="Dynamic connectivity solution to estimate percolation threshold"></a>Dynamic connectivity solution to estimate percolation threshold</h4><h5 id="Q-How-to-check-whether-an-N-by-N-system-percolates"><a href="#Q-How-to-check-whether-an-N-by-N-system-percolates" class="headerlink" title="Q. How to check whether an N-by-N system percolates?"></a>Q. How to check whether an <em>N</em>-by-<em>N</em> system percolates?</h5><h5 id="Q-How-to-check-whether-an-N-by-N-system-percolates-1"><a href="#Q-How-to-check-whether-an-N-by-N-system-percolates-1" class="headerlink" title="Q. How to check whether an N-by-N system percolates?"></a>Q. How to check whether an <em>N</em>-by-<em>N</em> system percolates?</h5><ul>
<li><p>Create an object for each site and name them $0$ to $N^2–1$.</p>
</li>
<li><p>Sites are in same component if connected by open sites.</p>
</li>
<li><p>Percolates iff any site on bottom row is connected to site on top row.</p>
<blockquote>
<p>(brute-force algorithm: N 2 calls to connected())</p>
</blockquote>
</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/top-down.png" alt="top-down"></p>
<h5 id="Clever-trick"><a href="#Clever-trick" class="headerlink" title="Clever trick."></a>Clever trick.</h5><ul>
<li><p>Introduce 2 virtual sites (and connections to top and bottom).</p>
</li>
<li><p>Percolates iff virtual top site is connected to virtual bottom site.</p>
<blockquote>
<p>(efficient algorithm: only 1 call to connected())</p>
</blockquote>
</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/per.png" alt="per"></p>
<h5 id="Q-How-to-model-opening-a-new-site"><a href="#Q-How-to-model-opening-a-new-site" class="headerlink" title="Q. How to model opening a new site?"></a>Q. How to model opening a new site?</h5><p>A. Mark new site as open; connect it to all of its adjacent open sites.</p>
<blockquote>
<p>(up to 4 calls to union())</p>
</blockquote>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/perco.png" alt="perco"></p>
<h3 id="Percolation-Exercise"><a href="#Percolation-Exercise" class="headerlink" title="Percolation Exercise"></a>Percolation Exercise</h3><h4 id="Java-Environment"><a href="#Java-Environment" class="headerlink" title="Java Environment"></a>Java Environment</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdRandom;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdStats;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.WeightedQuickUnionUF;</span><br></pre></td></tr></table></figure>

<p>Note that <em>your</em> code must be in the <em>default package</em>; if you use a <code>package</code> statement, the autograder will reject your submission.</p>
<h4 id="Percolation-1"><a href="#Percolation-1" class="headerlink" title="Percolation."></a>Percolation.</h4><p>Given a composite systems comprised of randomly distributed insulating and metallic materials: what fraction of the materials need to be metallic so that the composite system is an electrical conductor? </p>
<p>Given a porous landscape with water on the surface (or oil below), under what conditions will the water be able to drain through to the bottom (or the oil to gush through to the surface)? </p>
<p>Scientists have defined an abstract process known as <em>percolation</em> to model such situations.</p>
<h4 id="The-model"><a href="#The-model" class="headerlink" title="The model."></a>The model.</h4><p>We model a percolation system using an <em>n</em>-by-<em>n</em> grid of <em>sites</em>.</p>
<p>Each site is either <em>open</em> or <em>blocked</em>. </p>
<p>A <em>full</em> site is an open site that can be connected to an open site in the top row via a chain of neighboring (left, right, up, down) open sites. We say the system <em>percolates</em> if there is a full site in the bottom row. </p>
<p>In other words, a system percolates if we fill all open sites connected to the top row and that process fills some open site on the bottom row. (For the insulating&#x2F;metallic materials example, the open sites correspond to metallic materials, so that a system that percolates has a metallic path from top to bottom, with full sites conducting. </p>
<p>For the porous substance example, the open sites correspond to empty space through which water might flow, so that a system that percolates lets water fill open sites, flowing from top to bottom.)</p>
<h4 id="The-problem"><a href="#The-problem" class="headerlink" title="The problem."></a>The problem.</h4><p>In a famous scientific problem, researchers are interested in the following question: </p>
<p>if sites are independently set to be open with probability $p$ (and therefore blocked with probability $1−p$), what is the probability that the system percolates? When $p$ equals 0, the system does not percolate; when $p$ equals 1, the system percolates. </p>
<p>The plots below show the site vacancy probability $p$ versus the percolation probability for 20-by-20 random grid (left) and 100-by-100 random grid (right).</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/site-vacancy.png" alt="site-vacancy"></p>
<p>When <em>n</em> is sufficiently large, there is a <em>threshold</em> value $p^*$ such that when $p&lt;p^*$ a random <em>n*-by-<em>n</em> grid almost never percolates, and when $p&gt;p^</em>$, a random <em>n</em>-by-<em>n</em> grid almost always percolates.</p>
<p>No mathematical solution for determining the percolation threshold $p^*$ has yet been derived. Your task is to write a computer program to estimate $p^*$.</p>
<h4 id="Percolation-data-type"><a href="#Percolation-data-type" class="headerlink" title="Percolation data type."></a>Percolation data type.</h4><p>To model a percolation system, create a data type <code>Percolation</code> with the following API:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Percolation</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// creates n-by-n grid, with all sites initially blocked</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Percolation</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// opens the site (row, col) if it is not open already</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// is the site (row, col) open?</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOpen</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// is the site (row, col) full?</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// returns the number of open sites</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numberOfOpenSites</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// does the system percolate?</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">percolates</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// test client (optional)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Corner-cases"><a href="#Corner-cases" class="headerlink" title="Corner cases."></a>Corner cases.</h5><p>By convention, the row and column indices are integers between 1 and $n$, where $(1,1)$ is the upper-left site: Throw an <code>IllegalArgumentException</code> if any argument to <code>open()</code>, <code>isOpen()</code>, or <code>isFull()</code> is outside its prescribed range. </p>
<p>Throw an <code>IllegalArgumentException</code> in the constructor if $n≤0$.</p>
<h5 id="Performance-requirements"><a href="#Performance-requirements" class="headerlink" title="Performance requirements."></a>Performance requirements.</h5><p>The constructor must take time proportional to <em>n</em>2; all instance methods must take constant time plus a constant number of calls to <code>union()</code> and <code>find()</code>.</p>
<h4 id="Monte-Carlo-simulation-1"><a href="#Monte-Carlo-simulation-1" class="headerlink" title="Monte Carlo simulation."></a>Monte Carlo simulation.</h4><p>To estimate the percolation threshold, consider the following computational experiment:</p>
<ul>
<li>Initialize all sites to be blocked.</li>
<li>Repeat the following until the system percolates:</li>
<li>Choose a site uniformly at random among all blocked sites.</li>
<li>Open the site.</li>
<li>The fraction of sites that are opened when the system percolates provides an estimate of the percolation threshold.</li>
</ul>
<p>For example, if sites are opened in a 20-by-20 lattice according to the snapshots below, then our estimate of the percolation threshold is 204&#x2F;400 &#x3D; 0.51 because the system percolates when the 204th site is opened.</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/2024/07/15/alg-Union%20Find/opensites.png" alt="opensites"></p>
<p>By repeating this computation experiment <em>T</em> times and averaging the results, we obtain a more accurate estimate of the percolation threshold. Let <em>xt</em> be the fraction of open sites in computational experiment <em>t</em>. The sample mean x⎯⎯⎯x¯ provides an estimate of the percolation threshold; the sample standard deviation <em>s</em>; measures the sharpness of the threshold.</p>
<p>$$\begin{align} \overline{x}&#x3D;\frac{x_1+x_2+…+x_T}{T}, \tag{1}s^2&#x3D;\frac{(x_1-\overline{x})^2+(x_2-\overline{x})^2+…+(x_T-\overline{x})^2}{T-1} \end{align}$$</p>
<p>Assuming <em>T</em> is sufficiently large (say, at least 30), the following provides a 95% confidence interval for the percolation threshold:</p>
<p>$$\begin{align} \overline{x}-\frac{1.96s}{\sqrt{T}}, \tag{2}\overline{x}+\frac{1.96s}{\sqrt{T}}, \end{align}$$</p>
<p>To perform a series of computational experiments, create a data type <code>PercolationStats</code> with the following API.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PercolationStats</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// perform independent trials on an n-by-n grid</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PercolationStats</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> trials)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// sample mean of percolation threshold</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">mean</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// sample standard deviation of percolation threshold</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">stddev</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// low endpoint of 95% confidence interval</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">confidenceLo</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// high endpoint of 95% confidence interval</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">confidenceHi</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// test client (see below)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Throw an <code>IllegalArgumentException</code> in the constructor if either <em>n</em> ≤ 0 or <em>trials</em> ≤ 0.</p>
<p>Also, include a <code>main()</code> method that takes two <em>command-line arguments</em> <em>n</em> and <em>T</em>, performs <em>T</em> independent computational experiments (discussed above) on an <em>n</em>-by-<em>n</em> grid, and prints the sample mean, sample standard deviation, and the <strong>95% confidence interval</strong> for the percolation threshold. Use <a target="_blank" rel="noopener" href="https://algs4.cs.princeton.edu/code/javadoc/edu/princeton/cs/algs4/StdRandom.html"><code>StdRandom</code></a> to generate random numbers; use <a target="_blank" rel="noopener" href="https://algs4.cs.princeton.edu/code/javadoc/edu/princeton/cs/algs4/StdStats.html"><code>StdStats</code></a> to compute the sample mean and sample standard deviation.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~/Desktop/percolation&gt; </span><span class="language-bash">java-algs4 PercolationStats 200 100</span></span><br><span class="line">mean                    = 0.5929934999999997</span><br><span class="line">stddev                  = 0.00876990421552567</span><br><span class="line"><span class="meta prompt_">95% </span><span class="language-bash">confidence interval = [0.5912745987737567, 0.5947124012262428]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">~/Desktop/percolation&gt; </span><span class="language-bash">java-algs4 PercolationStats 200 100</span></span><br><span class="line">mean                    = 0.592877</span><br><span class="line">stddev                  = 0.009990523717073799</span><br><span class="line"><span class="meta prompt_">95% </span><span class="language-bash">confidence interval = [0.5909188573514536, 0.5948351426485464]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">~/Desktop/percolation&gt; </span><span class="language-bash">java-algs4 PercolationStats 2 10000</span></span><br><span class="line">mean                    = 0.666925</span><br><span class="line">stddev                  = 0.11776536521033558</span><br><span class="line"><span class="meta prompt_">95% </span><span class="language-bash">confidence interval = [0.6646167988418774, 0.6692332011581226]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">~/Desktop/percolation&gt; </span><span class="language-bash">java-algs4 PercolationStats 2 100000</span></span><br><span class="line">mean                    = 0.6669475</span><br><span class="line">stddev                  = 0.11775205263262094</span><br><span class="line"><span class="meta prompt_">95% </span><span class="language-bash">confidence interval = [0.666217665216461, 0.6676773347835391]</span></span><br></pre></td></tr></table></figure>

<h4 id="Analysis-of-running-time-and-memory-usage-optional-and-not-graded"><a href="#Analysis-of-running-time-and-memory-usage-optional-and-not-graded" class="headerlink" title="Analysis of running time and memory usage (optional and not graded)."></a>Analysis of running time and memory usage (optional and not graded).</h4><blockquote>
<p>Implement the Percolation data type using the quick find algorithm in QuickFindUF.</p>
</blockquote>
<p>Use Stopwatch to measure the total running time of PercolationStats for various values of n and T. </p>
<ul>
<li><p>How does doubling n affect the total running time? </p>
</li>
<li><p>How does doubling T affect the total running time? </p>
</li>
<li><p>Give a formula (using tilde notation) of the total running time on your computer (in seconds) as a single function of both n and T.</p>
</li>
<li><p>Using the 64-bit memory-cost model from lecture, give the total memory usage in bytes (using tilde notation) that a Percolation object uses to model an n-by-n percolation system.</p>
</li>
<li><p>Count all memory that is used, including memory for the union–find data structure.</p>
</li>
</ul>
<p>Now, implement the Percolation data type using the weighted quick union algorithm in WeightedQuickUnionUF. Answer the questions in the previous paragraph.</p>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>READ NEXT</span></section><section class="body fs14"><a id="next" href="/2024/07/15/alg-ELEMENTARY%20SORTS/">coursera 2.1 ELEMENTARY SORTS<span class="note">Older</span></a><div class="line"></div><a id="prev" href="/2024/07/15/leetcode/designpattern/">设计模式总结<span class="note">Newer</span></a></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</p>
<p>This site was deployed by <a href="http://example.com/">@zennlyu</a> using <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0" title="v1.8.0">Stellar</a>.</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://fastly.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://fastly.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://fastly.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti/umd/heti.min.css","js":"https://unpkg.com/heti/umd/heti-addon.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
